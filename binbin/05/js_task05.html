<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>IFE JavaScript Task 05</title>
	<link rel="stylesheet" type="text/css" href="simple_style.css">
</head>
<body>
	<div id="container">
		<div id="operation">
			<input id="num" type="text" name="">
			<button id="input_left">左插入</button>
			<button id="input_right">右插入</button>
			<button id="remove_left ">左侧出</button>
			<button id="remove_right">右侧出</button>
		</div>
		<ul id="list">
			<li>80</li>
			<li>10</li>
			<li>40</li>
		</ul>
		<button id="ascending">升序</button>
		<button id="descending">降序</button>
	</div>
	<script type="text/javascript">

			var operation    = document.getElementById("operation");
			var num          = document.getElementById("num");
			var input_left   = document.getElementById("input_left");
			var input_right  = document.getElementById("input_right");
			var remove_left  = document.getElementById("remove_left ");
			var remove_right = document.getElementById("remove_right");
			var list         = document.getElementById("list");
			var aLi          = document.getElementsByTagName("li");
			var descending   = document.getElementById("descending");
			var ascending    = document.getElementById("ascending");
			var judge;
			changeHeight();





			// 左插入
			input_left.onclick=function() {
				judgenum(60);
				if(!judge){
					var input_li = document.createElement("li");
					if(!(isNaN(num.value)||num.value=='')) {
						if (9<num.value&&num.value<101) {
							input_li.style.height=num.value*2+'px';
							list.insertBefore(input_li,list.firstChild);
							num.value = "";
						}
						else {
							alert("请输入大于10小于100的数字！");
							num.value = "";
						}
					}
					// else if(9>num.value||num.value>101) {
					// 	alert("请输入大于10小于100的数字！");
					// 	num.value = "";
					// }
					else {
						alert("请输入数字！");
						num.value = "";
					}
				}

			}





			// 右插入
			input_right.onclick=function() {
				judgenum(60);
				if(!judge){
					var input_li = document.createElement("li");
					if(!(isNaN(num.value)||num.value=='')) {
						if (9<num.value&&num.value<101) {
							input_li.style.height=num.value*2+'px';
							list.appendChild(input_li);
							num.value = "";
						}
						else {
							alert("请输入大于10小于100的数字！");
							num.value = "";
						}
					}
					else if(9>num.value||num.value>101) {
						alert("请输入大于10小于100的数字！");
						num.value = "";
					}
					else {
						alert("请输入数字！");
					}
				}
			}





			// 左侧出
			remove_left.onclick=function() {
				var ali = document.getElementsByTagName("li");
				if(confirm("该值为"+ali[0].offsetHeight/2+"，你确定要删除？")) {
        			ali[0].remove();
    			}
    			else {
        			alert("取消删除");
   				}
			}





			// 右侧出
			remove_right.onclick=function() {
				var ali = document.getElementsByTagName("li");
				var len=ali.length;
				if(confirm("该值为"+ali[len-1].offsetHeight/2+"，你确定要删除？")) {
        			ali[len-1].remove();
    			}
    			else {
        			alert("取消删除");
   				}
			}





			// 升序
			ascending.onclick=function() {
				var ali = document.getElementsByTagName("li");
				var a=[];
				var b=[];
				for (var i = 0; i < aLi.length; i++) {
					a.push(parseInt(aLi[i].style.height));
				}

				b=bubbleSort(a);
				// console.log(b);
				for (var i = 0; i < aLi.length; i++) {
					aLi[i].style.height=b[i]+'px';
				}
			}





			// 降序
			descending.onclick=function() {
				var ali = document.getElementsByTagName("li");
				var a=[];
				var b=[];
				for (var i = 0; i < aLi.length; i++) {
					a.push(parseInt(aLi[i].style.height));
				}

				b=(bubbleSort(a)).reverse();
				// console.log(b);
				for (var i = 0; i < aLi.length; i++) {
					aLi[i].style.height=b[i]+'px';
				}
			}





			// 判断li的个数是否小于60
			function judgenum(num) {
				var a=document.getElementsByTagName("li");
				if(a.length+1>num) {
					alert("超过"+num+"列了");
					judge = true;
				}
				else {
					judge = false;
				}
			}

			// 将li元素中的数值转换为对应li的高
			function changeHeight() {
				for (var i = 0; i < aLi.length; i++) {
					aLi[i].style.height=parseInt(aLi[i].innerHTML)*2+'px';
					aLi[i].innerHTML='';
				}
			}

			// 冒泡算法 start
			function swap(items,firstIndex,secondIndex) {
				var temp=items[firstIndex];
				items[firstIndex]=items[secondIndex];
				items[secondIndex]=temp;
			}
			function bubbleSort(items) {
				var i,j,len=items.length;
				for (var i = 0; i < len; i++) {
					for (var j = 0; j < len-i; j++) {
						if (items[j]>items[j+1]) {
							swap(items,j,j+1);
						}
					}

				}
				return items;
			}
			// 冒泡算法 end
	</script>
</body>
</html>